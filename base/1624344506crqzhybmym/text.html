<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/post/128140/"><span style=" text-decoration: underline; color:#0000ff;">https://habr.com/ru/post/128140/</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#343434;">Построение цифрового фильтра с конечной импульсной характеристикой</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#5e6973;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:9px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/hub/algorithms/"><span style=" font-size:13px; text-decoration: underline; color:#0000ff; background-color:transparent;">Алгоритмы</span></a></li></ul>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#333333;" style=" margin-top:7px; margin-bottom:4px; margin-left:0px; margin-right:8px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/sandbox/"><span style=" font-size:12px; text-decoration: underline; color:#6667a3; background-color:transparent;">Из песочницы</span></a></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:-5px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><a name="post-content-body"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#222222;">В</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#222222;">ступление издалека</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br />Недавно передо мной встала достаточно интересная задача, с которой я раньше никогда не сталкивался — борьба с шумом. Мы принимали сигнал с датчиков на аналогово-цифровой преобразователь (АЦП)<br />А так как данная тема для меня была (хотя и сейчас есть кое-где) темным лесом, я пошел мучить вопросами гугл, мне показалось освещена эта тема не очень подробно и доступно, поэтому решил написать статью с примером разработки и готовым исходником.</span><a name="habracut"></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br /></span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:-5px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#222222;">Ближе к делу</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br />Цифровые фильтры могут быть двух видов – с конечной и с бесконечной импульсной характеристикой (КИХ и БИХ). Для решения моей задачи подходит КИХ-фильтр, поэтому про него и расскажу.<br /><br />Для начала посмотрим как же он работает:<br /><br /></span><img src="image16243445048jthuwhwgd.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br /><br />Здесь показан пример фильтра нижних частот, как видно на рисунке, этот фильтр пропускает нижние частоты, а все остальные старается отсечь (подавление), или хотя бы ослабить (переход). Отклонения в полосе пропускания и полосе подавления выбираются в зависимости от принимаемого сигнала, но при использовании различных весовых функций, на них могут накладываться определенные ограничения. Например, если используется весовая функция Хэмминга, то эти отклонения будут равны между собой.<br />Ширина полосы перехода ∆F зависит от длины фильтра и от весовой функции (для функции Блэкмена ∆F=5,5|N).<br /><br />Работает фильтр довольно просто: фильтр получает значения, с помощью коэффициентов преобразует их и выдаёт выходную последовательность, тогда с формулой самого фильтра всё понятно:<br /><br /></span><img src="image1624344504r63v27vsto.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br /><br />Она реализуется через цикл, но постойте, а где же взять нужные коэффициенты? Вот тут-то как раз и зарыта собака (и не одна).<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#222222;">Параметры фильтра</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br />Естественно для разных фильтров нужны разные коэффициенты, и для этого нужно определиться с параметрами фильтра, это обычно сначала делается теоретически (с умным видом прикидываем какая у нашего сигнала частота, потом частоты, которые надо отсеивать), а потом изучаем АЧХ реальных измерений (и осознаем, как сильно мы ошибались).<br />По этим АЧХ мы определяемся с идеальной частотной характеристикой (какие частоты проходят свободно, какие мы убираем и как сильно), теперь нам нужна идеальная импульсная характеристика её можно посчитать как Фурье-образ от идеальной частотной:<br /><br /></span><img src="image1624344504aqmj9y7fzf.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br /><br />где H_D(w) – идеальная характеристика.<br /><br />Но можно пойти и по более простому пути – есть уже заранее вычисленные идеальные импульсные характеристики, например для фильтра нижних частот формула выглядит следующим образом:<br /><br /></span><img src="image1624344504knzd59p2l5.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br /></span><img src="image1624344504gdrzoa6k2g.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br /><br />где fc и wc – частота среза.<br /><br />Итак, осталось уже немного идеал идеалом, а мы имеем дело с практикой, и нам нужна «реальная» импульсная характеристика. Для её расчета нам понадобится весовая функция w(n), их есть несколько разновидностей, в зависимости от требований к фильтру (Хэмминга, Хеннинга, Блэкмена, Кайзера, о них не говорю, ибо статья и так большая), в нашем случае я использую функцию Блэкмена:<br /><br /></span><img src="image1624344504os6qswozb4.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br /><br />где N – длина фильтра, т.е. количество коэффициентов.<br /><br />Теперь надо перемножить идеальную импульсную характеристику и весовую функцию:<br /><br /></span><img src="image1624344504fbruocjdfl.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#222222;">Финишная прямая</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br />Теперь мы готовы рассчитать выходные значения, по формуле фильтра, она самая первая в этой статье, ну вот и всё, в завершение привожу исходный код фильтра:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4078f2; background-color:#fbfdff;">Filter</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> (</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">double</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> in[], </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">double</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> out[], </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">int</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> sizeIn)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">int</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> N = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">20</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//Длина фильтра</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">long</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">double</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> Fd = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">2000</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//Частота дискретизации входных данных</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">long</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">double</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> Fs = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">20</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//Частота полосы пропускания</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">long</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">double</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> Fx = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">50</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//Частота полосы затухания</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">long</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">double</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> H [N] = {</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">}; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//Импульсная характеристика фильтра</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">long</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">double</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> H_id [N] = {</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">}; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//Идеальная импульсная характеристика</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">long</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">double</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> W [N] = {</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">}; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//Весовая функция</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//Расчет импульсной характеристики фильтра</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">double</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> Fc = (Fs + Fx) / (</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">2</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> * Fd);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">for</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> (</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">int</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> i=</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">;i&lt;N;i++)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> (i==</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">) H_id[i] = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">2</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">*M_PI*Fc;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">else</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> H_id[i] = sinl(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">2</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">*M_PI*Fc*i )/(M_PI*i);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">// весовая функция Блекмена</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">W [i] = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0.42</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> - </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0.5</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> * cosl((</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">2</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">*M_PI*i) /( N</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">-1</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">)) + </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0.08</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> * cosl((</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">4</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">*M_PI*i) /( N</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">-1</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">H [i] = H_id[i] * W[i];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//Нормировка импульсной характеристики</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">double</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> SUM=</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">for</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> (</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">int</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> i=</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">; i&lt;N; i++) SUM +=H[i];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">for</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> (</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">int</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> i=</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">; i&lt;N; i++) H[i]/=SUM; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//сумма коэффициентов равна 1 </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">//Фильтрация входных данных</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">for</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> (</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">int</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> i=</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">; i&lt;sizeIn; i++)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">out[i]=</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0.</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">for</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> (</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">int</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;"> j=</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">; j&lt;N</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">-1</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">; j++)</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">// та самая формула фильтра</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#a626a4; background-color:#fbfdff;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">(i-j&gt;=</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">out[i]+= H[j]*in[i-j];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#383a42; background-color:#fbfdff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br /><br />При подготовке статьи использовались:<br />Основные характеристики и параметры фильтров. </span><a href="http://analogiu.ru/6/6-5-2.html"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#548eaa; background-color:transparent;">analogiu.ru/6/6-5-2.html</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#222222;"><br />Айфичер Э. Джервис Б. Цифровая обработка сигналов. Практический подход. 2-е издание</span></p>
<p style=" margin-top:24px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; font-weight:696; color:#444444;">Теги:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:6px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?q=%5B%D1%86%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D1%8F%20%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D1%81%D0%B8%D0%B3%D0%BD%D0%B0%D0%BB%D0%BE%D0%B2%5D&amp;target_type=posts"><span style=" font-size:14px; font-weight:496; text-decoration: underline; color:#548eaa; background-color:transparent;">цифровая обработка сигналов</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:6px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?q=%5B%D1%86%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D1%8B%D0%B5%20%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D1%8B%5D&amp;target_type=posts"><span style=" font-size:14px; font-weight:496; text-decoration: underline; color:#548eaa; background-color:transparent;">цифровые фильтры</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:6px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?q=%5Bc%20plus%20plus%5D&amp;target_type=posts"><span style=" font-size:14px; font-weight:496; text-decoration: underline; color:#548eaa; background-color:transparent;">c plus plus</span></a></li></ul>
<p style=" margin-top:24px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; font-weight:696; color:#444444;">Хабы:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-size:9pt; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:6px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/hub/algorithms/"><span style=" font-size:14px; font-weight:496; text-decoration: underline; color:#548eaa; background-color:transparent;">Алгоритмы</span></a></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p></body></html>