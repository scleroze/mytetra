<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Geneva,sans-serif'; color:#666666; background-color:#f5f9f9;">Ставим следующие пакеты: </span></p>
<p style=" margin-top:15px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; background-color:#f5f9f9;"><span style=" font-family:'Trebuchet MS,Helvetica,Arial,sans-serif'; font-size:11px; color:#6cb2e4;">Код:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">sudo apt-get install libusb-1.0-0-dev</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">sudo apt-get install git</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">sudo apt-get install  autoconf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">sudo apt-get install  automake</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">sudo apt-get install  libtool</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Geneva,sans-serif'; color:#666666; background-color:#f5f9f9;">Копируем st-link в любую папку </span></p>
<p style=" margin-top:15px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; background-color:#f5f9f9;"><span style=" font-family:'Trebuchet MS,Helvetica,Arial,sans-serif'; font-size:11px; color:#6cb2e4;">Код:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">git clone git://github.com/burjui/stlink.git </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Geneva,sans-serif'; color:#666666; background-color:#f5f9f9;">Далее устанавливаем st-link </span></p>
<p style=" margin-top:15px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; background-color:#f5f9f9;"><span style=" font-family:'Trebuchet MS,Helvetica,Arial,sans-serif'; font-size:11px; color:#6cb2e4;">Код:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">./autogen.sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">./configure</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">make</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">sudo make install</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Geneva,sans-serif'; color:#666666; background-color:#f5f9f9;">Ждем окончания установки.. Даем права на запись: </span></p>
<p style=" margin-top:15px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; background-color:#f5f9f9;"><span style=" font-family:'Trebuchet MS,Helvetica,Arial,sans-serif'; font-size:11px; color:#6cb2e4;">Код:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">sudo cp 49-stlinkv* /etc/udev/rules.d/</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">sudo udevadm control --reload-rules</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Geneva,sans-serif'; color:#666666; background-color:#f5f9f9;">Выключаем эмуляцию флешки: </span></p>
<p style=" margin-top:15px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; background-color:#f5f9f9;"><span style=" font-family:'Trebuchet MS,Helvetica,Arial,sans-serif'; font-size:11px; color:#6cb2e4;">Код:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">sudo cp stlink_v1.modprobe.conf /etc/modprobe.d</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">sudo modprobe -r usb-storage &amp;&amp; sudo modprobe usb-storage</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Geneva,sans-serif'; color:#666666; background-color:#f5f9f9;">Подключаем нашу отладочную плату, заходим в папку flash(утилита для прошивки мк) Выполняем команду make, получаем файл st-flash Запускаем st-flash: </span></p>
<p style=" margin-top:15px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; background-color:#f5f9f9;"><span style=" font-family:'Trebuchet MS,Helvetica,Arial,sans-serif'; font-size:11px; color:#6cb2e4;">Код:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">$ ./st-flash</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">invalid command line</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">stlinkv1 command line: ./flash [--reset] {read|write} /dev/sgX path addr &lt;size&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">stlinkv1 command line: ./flash /dev/sgX erase</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">stlinkv2 command line: ./flash [--reset] {read|write} path addr &lt;size&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">stlinkv2 command line: ./flash erase</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">                       use hex format for addr and &lt;size&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Geneva,sans-serif'; color:#666666; background-color:#f5f9f9;">Видим список доступных команд.. Для проверки правильности установки, я выполнил очистку мк: </span></p>
<p style=" margin-top:15px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; background-color:#f5f9f9;"><span style=" font-family:'Trebuchet MS,Helvetica,Arial,sans-serif'; font-size:11px; color:#6cb2e4;">Код:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">$ ./st-flash erase</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">2014-09-16T14:35:16 INFO src/stlink-usb.c: -- exit_dfu_mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">2014-09-16T14:35:16 INFO src/stlink-common.c: Loading device parameters....</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">2014-09-16T14:35:16 INFO src/stlink-common.c: Device connected is: F1 Medium-density Value Line device, id 0x10016420</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">2014-09-16T14:35:16 INFO src/stlink-common.c: SRAM size: 0x2000 bytes (8 KiB), Flash: 0x20000 bytes (128 KiB) in pages of 1024 bytes</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:140px; -qt-block-indent:0; text-indent:0px; line-height:124%;"><span style=" font-family:'Consolas,Courier New,Courier,monospace'; font-size:10pt; color:#666666;">Mass erasing</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Geneva,sans-serif'; color:#666666; background-color:#f5f9f9;">Как видим программатор определился, вывел информацию об мк установленном на плате. Количество памяти, id контроллера.. Информация по установке компилятора, настройки IDE </span><a href="http://robocraft.ru/blog/ARM/653.html"><span style=" font-family:'Verdana,Geneva,sans-serif'; text-decoration: underline; color:#6d3f03;">http://robocraft.ru/blog/ARM/653.html</span></a><span style=" font-family:'Verdana,Geneva,sans-serif'; color:#000000;"><br />Я настраивал так:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://we.easyelectronics.ru/CADSoft/st-link-eclipse-na-ubuntu.html"><span style=" text-decoration: underline; color:#0000ff;">http://we.easyelectronics.ru/CADSoft/st-link-eclipse-na-ubuntu.html</span></a> </p></body></html>